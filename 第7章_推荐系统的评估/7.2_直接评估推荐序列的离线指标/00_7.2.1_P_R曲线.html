
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>00_7.2.1_P_R曲线</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
</head>
<body>
  <div class="container">
    <h1>00_7.2.1 P-R曲线</h1>
<p>&quot;&quot;&quot;
Lecture: 第7章 推荐系统的评估/7.2 直接评估推荐序列的离线指标
Content: 00_7.2.1 P-R曲线
&quot;&quot;&quot;</p>
<h3>7.2.1 P-R曲线</h3>
<h4>概述</h4>
<p>P-R曲线，即精确率-召回率曲线（Precision-Recall Curve），是评估推荐系统性能的一种重要工具。P-R曲线展示了在不同的阈值下，推荐系统的精确率和召回率的变化关系。通过分析P-R曲线，可以更全面地了解推荐系统在不同条件下的表现，从而优化推荐算法。</p>
<h4>精确率和召回率</h4>
<ol>
<li>
<p><strong>精确率（Precision）</strong>：</p>
<ul>
<li><strong>定义</strong>：精确率是指推荐结果中相关项目所占的比例。</li>
<li><strong>计算公式</strong>：<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mfrac><mrow><mi>T</mi><mi>P</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>P</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">Precision = \frac{TP}{TP + FP}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.36033em;"></span><span class="strut bottom" style="height:2.1296600000000003em;vertical-align:-0.7693300000000001em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">c</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="mord mathit" style="margin-right:0.13889em;">P</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit" style="margin-right:0.13889em;">P</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p>
其中，TP为真正例数，FP为假正例数。</li>
<li><strong>作用</strong>：反映推荐结果的准确性，适用于推荐结果较短的情况。</li>
</ul>
</li>
<li>
<p><strong>召回率（Recall）</strong>：</p>
<ul>
<li><strong>定义</strong>：召回率是指实际相关项目中被推荐的比例。</li>
<li><strong>计算公式</strong>：<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi><mo>=</mo><mfrac><mrow><mi>T</mi><mi>P</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>N</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">Recall = \frac{TP}{TP + FN}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.36033em;"></span><span class="strut bottom" style="height:2.1296600000000003em;vertical-align:-0.7693300000000001em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit">e</span><span class="mord mathit">c</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit" style="margin-right:0.13889em;">P</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p>
其中，TP为真正例数，FN为假负例数。</li>
<li><strong>作用</strong>：反映推荐系统的覆盖能力，适用于需要全面推荐的情况。</li>
</ul>
</li>
</ol>
<h4>P-R曲线的绘制</h4>
<ol>
<li>
<p><strong>数据准备</strong>：</p>
<ul>
<li><strong>预测评分</strong>：推荐系统对所有候选项目进行预测评分。</li>
<li><strong>实际标签</strong>：实际的用户行为数据，表示哪些项目是相关的，哪些是无关的。</li>
</ul>
</li>
<li>
<p><strong>计算精确率和召回率</strong>：</p>
<ul>
<li>设定不同的评分阈值，对每个阈值计算相应的精确率和召回率。</li>
<li>生成一组精确率和召回率的点，作为P-R曲线的坐标点。</li>
</ul>
</li>
<li>
<p><strong>绘制P-R曲线</strong>：</p>
<ul>
<li>将所有坐标点绘制在二维平面上，横轴为召回率，纵轴为精确率。</li>
<li>连接这些点，形成P-R曲线。</li>
</ul>
</li>
</ol>
<h4>P-R曲线的分析</h4>
<ol>
<li>
<p><strong>曲线形状</strong>：</p>
<ul>
<li>曲线越接近右上角，表示推荐系统的性能越好，即在高召回率的同时，能够保持高精确率。</li>
<li>曲线的变化反映了推荐系统在不同阈值下的性能表现，帮助识别最佳的评分阈值。</li>
</ul>
</li>
<li>
<p><strong>AUC值</strong>：</p>
<ul>
<li>P-R曲线下的面积（Area Under Curve, AUC）可以量化推荐系统的整体性能。</li>
<li>AUC值越大，表示推荐系统的综合性能越好。</li>
</ul>
</li>
<li>
<p><strong>对比分析</strong>：</p>
<ul>
<li>不同推荐算法的P-R曲线可以放在一起对比，评估不同算法的优劣。</li>
<li>通过对比，可以选择性能最优的推荐算法。</li>
</ul>
</li>
</ol>
<h4>实际应用案例</h4>
<ol>
<li>
<p><strong>电商推荐系统</strong>：</p>
<ul>
<li>某电商平台在优化推荐算法时，使用P-R曲线评估不同算法的性能。通过对比不同算法的P-R曲线，选择在高召回率下仍能保持高精确率的算法，提升用户的购物体验。</li>
</ul>
</li>
<li>
<p><strong>内容推荐系统</strong>：</p>
<ul>
<li>某内容平台在推荐文章和视频时，使用P-R曲线分析推荐结果的精确率和召回率。通过调整评分阈值，找到最佳的推荐策略，确保用户能够看到更多相关的内容。</li>
</ul>
</li>
<li>
<p><strong>社交网络推荐系统</strong>：</p>
<ul>
<li>某社交网络平台在好友推荐和群组推荐中，使用P-R曲线评估推荐系统的性能。通过分析P-R曲线，优化推荐算法，提高用户的互动和参与度。</li>
</ul>
</li>
</ol>
<h3>总结</h3>
<p>P-R曲线是评估推荐系统性能的重要工具，通过展示精确率和召回率在不同阈值下的变化关系，帮助工程师更全面地了解推荐系统的表现。通过分析P-R曲线的形状和AUC值，可以优化推荐算法，提升推荐系统的性能。在未来，随着推荐系统技术的发展，P-R曲线将继续在评估和优化推荐系统中发挥重要作用。</p>

  </div>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: "$$", right: "$$", display: true},
          {left: "$", right: "$", display: false},
          {left: "\(", right: "\)", display: false},
          {left: "\[", right: "\]", display: true}
        ]
      });
    });
  </script>
</body>
</html>
  